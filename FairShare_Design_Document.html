<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FairShare Documentation</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; color: #333; }
        h1, h2, h3 { color: #2c3e50; }
        code { background: #f4f4f4; padding: 2px 5px; border-radius: 4px; font-family: monospace; }
        pre { background: #f4f4f4; padding: 15px; border-radius: 8px; overflow-x: auto; }
        .mermaid { margin: 30px 0; text-align: center; }
        hr { border: 0; border-top: 1px solid #eee; margin: 40px 0; }
        ul { padding-left: 20px; }
        li { margin-bottom: 5px; }
    </style>
</head>
<body>

    <h1>FairShare Project Documentation</h1>

    <h2>1. Executive Summary</h2>
    <p><strong>FairShare</strong> is a mobile expense splitting application designed to simplify shared financial responsibilities among friends, roommates, and travel groups. Built with <strong>React Native (Expo)</strong>, it offers an offline-first experience with a focus on speed, privacy, and ease of use. The app allows users to track shared expenses, split bills using various methods (Equal, Custom, Percentage, Shares, Itemized), and settle debts efficiently.</p>

    <hr>

    <h2>2. Key Features</h2>

    <h3>üí∞ Expense Tracking</h3>
    <ul>
        <li><strong>Quick Entry</strong>: Add expenses in seconds with a streamlined UI.</li>
        <li><strong>Flexible Splitting</strong>:
            <ul>
                <li><strong>Equal</strong>: Split evenly among selected members.</li>
                <li><strong>Custom</strong>: Assign specific amounts to each person.</li>
                <li><strong>Percentage</strong>: Distribute costs by percentage (e.g., 60/40).</li>
                <li><strong>Shares</strong>: Allocate based on units (e.g., Alice had 2 drinks, Bob had 1).</li>
                <li><strong>Itemized</strong>: Scan receipts and assign specific line items to individuals.</li>
            </ul>
        </li>
    </ul>

    <h3>üßæ Smart Receipt Scanning (OCR)</h3>
    <ul>
        <li>Integrated <strong>OCR.space API</strong> to digitize physical receipts.</li>
        <li><strong>Automated Parsing</strong>: Detects merchant name, total amount, and line items.</li>
        <li><strong>Tax & Service Charge</strong>: Automatically identifies and applies tax/service charges proportionally to users based on their assigned items.</li>
    </ul>

    <h3>üë• User & Group Management</h3>
    <ul>
        <li><strong>Manage Users</strong>: Add, rename, or remove users dynamically.</li>
        <li><strong>Avatars</strong>: Auto-generated colored avatars for easy identification.</li>
        <li><strong>Group Statistics</strong>: Visual leaderboard showing "Who spent the most" and spending distribution.</li>
    </ul>

    <h3>‚öñÔ∏è Debt Settlement</h3>
    <ul>
        <li><strong>Simplified Debts</strong>: Calculates the minimum number of transactions required to settle up using an optimized algorithm.</li>
        <li><strong>Shareable Summaries</strong>: Generate text reports of who owes whom to share via WhatsApp, Telegram, or other messaging apps.</li>
    </ul>

    <hr>

    <h2>3. Technical Architecture</h2>

    <h3>Tech Stack</h3>
    <ul>
        <li><strong>Framework</strong>: React Native (Expo SDK 54)</li>
        <li><strong>Language</strong>: TypeScript</li>
        <li><strong>Styling</strong>: NativeWind (Tailwind CSS for React Native)</li>
        <li><strong>Database</strong>: <code>expo-sqlite</code> (Local, offline-first SQL database)</li>
        <li><strong>Navigation</strong>: <code>expo-router</code> (File-based routing)</li>
        <li><strong>Image/OCR</strong>: <code>expo-image-picker</code>, <code>expo-image</code>, REST API fetch</li>
    </ul>

    <h3>Data Model (SQLite)</h3>
    <div class="mermaid">
    erDiagram
        USERS ||--o{ EXPENSES : pays
        USERS ||--o{ EXPENSE_SPLITS : owes
        EXPENSES ||--|{ EXPENSE_SPLITS : contains
        EXPENSES ||--o{ EXPENSE_ITEMS : has
        EXPENSE_ITEMS ||--|{ EXPENSE_ITEM_ASSIGNMENTS : assigned_to
        USERS ||--o{ EXPENSE_ITEM_ASSIGNMENTS : receives

        USERS {
            int id
            string name
            string avatar_color
        }
        EXPENSES {
            int id
            string title
            int amount
            int payer_id
            datetime created_at
        }
        EXPENSE_SPLITS {
            int id
            int expense_id
            int user_id
            int amount_owed
        }
        EXPENSE_ITEMS {
            int id
            int expense_id
            string name
            int amount
        }
    </div>

    <h3>Algorithm Highlights</h3>
    <ul>
        <li><strong>Split Logic</strong>: Handles rounding errors (cents) by distributing remainders to ensure the sum always matches the total.</li>
        <li><strong>Debt Simplification</strong>: Instead of A paying B, and B paying C, the app calculates the net flow so A pays C directly if applicable, reducing total transaction count.</li>
    </ul>

    <hr>

    <h2>4. User Workflow</h2>

    <h3>App Navigation Flow</h3>
    <div class="mermaid">
    graph TD
        Start[Open App] --> Home[Home Dashboard]
        Home -->|View| Stats[Statistics]
        Home -->|Action| Add[Add Expense]
        Home -->|Action| Settle[Settle Up]
        Home -->|Manage| Users[Manage Users]

        Add -->|Manual Input| Details[Enter Amount/Title]
        Add -->|Camera| OCR[Scan Receipt]
        OCR -->|Extract| Items[Review Items & Tax]
        Items --> Details

        Details --> Split{Split Mode}
        Split -->|Equal| Save
        Split -->|Custom| Save
        Split -->|Itemized| Save[Save Transaction]

        Save --> Home
    </div>

    <h3>Receipt Scanning Process</h3>
    <div class="mermaid">
    sequenceDiagram
        participant User
        participant App
        participant OCR_API
        participant Database

        User->>App: Tap "Scan Receipt"
        App->>User: Request Camera/Gallery
        User->>App: Select Image
        App->>OCR_API: Upload Image (POST)
        OCR_API-->>App: JSON Response (Lines/Text)
        App->>App: Parse Items, Total, Tax
        App->>User: Display Itemized List
        User->>App: Assign Items to Users
        App->>App: Calculate Splits + Tax Share
        User->>App: Save Expense
        App->>Database: Insert Expense & Splits
    </div>

    <hr>

    <h2>5. Future Roadmap</h2>
    <ul>
        <li>[ ] <strong>Multi-Currency Support</strong>: Handle international travel expenses with exchange rates.</li>
        <li>[ ] <strong>Cloud Sync</strong>: Optional cloud backup for multi-device access.</li>
        <li>[ ] <strong>Export Options</strong>: Export data to CSV/Excel for detailed analysis.</li>
        <li>[ ] <strong>Multiple Groups</strong>: Support for distinct groups (e.g., "Trip to Japan", "House Rent").</li>
    </ul>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>
